# 💰 실시간 경매 서비스

판매자가 경매에 상품을 등록하고, 다른 사용자가 입찰을 통해 경쟁하며 실시간으로 가격 변동/낙찰 여부를 알림으로 받는 서비스입니다.


## ❓ 왜 이 주제를 선정했는가?
실시간 알림 서비스 기능을 구현해보고 싶어서 찾아보던 중 `WebSocket`과 `SSE (Server-Sent Events)`에 대해 찾아보았고, 약 4주간의 프로젝트 기간 내에 구현 가능성을 고려하였을 때 `Web Socket`보다는 `SSE`가 적합하다고 판단하였습니다.
따라서 알림 서비스를 잘 활용할 수 있는 실시간 경매 서비스 프로젝트를 선정하였습니다.

## 🛠️ 기술 스택
<div align=center> 
  <img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white"> 
  <img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white"> 
  <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> 
  <img src="https://img.shields.io/badge/redis-DC382D?style=for-the-badge&logo=redis&logoColor=white"> 
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"> 
  <img src="https://img.shields.io/badge/aws_ec2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white"> 
</div>

## ✍🏻 프로젝트 개발 계획
- - -
### **1주차**
- [ ] 프로젝트 및 아키텍처 세팅
- [ ] DB 구성 및 ERD 설계
- [ ] 회원가입/로그인 구현

- - -
### **2주차**
- [ ] 상품 등록/조회/수정/삭제/상세보기 API 기능 구현
- [ ] 판매/구매 상품 목록 조회 API 구분하기
- [ ] 입찰 기능 구현

- - -
### **3주차**
- [ ] 포인트 거래 기능 구현
- [ ] SSE 알림 기능 구현

- - -
### **4주차**
- [ ] 최종 테스트 및 프로젝트 구조 안정화 작업
- [ ] AWS 서버 및 DB 배포
- [ ] (Optional) AWS S3 이미지 업로드 적용

- - -
## 📋 프로젝트 기능 및 설계
📌 회원
  - 회원가입
    - 사용자는 이메일을 통해 회원가입을 할 수 있다.
    - 이메일 인증을 통해 사용자 인증을 강화한다.
    - 이메일 인증번호는 단기간 휘발성 데이터로 간주하기 때문에 Redis에 저장한다.
    - 이메일 인증번호의 TTL은 5분으로 설정한다.
    - 비밀번호 암호화를 통해 개인정보 보안을 강화한다.
  - 로그인
    - 이메일과 비밀번호를 입력 후 로그인할 수 있다.
    - 이메일 인증이 처리되지 않은 이메일은 로그인할 수 없다.
  - 권한
    - 회원가입을 한 회원을 Default 권한으로 USER 권한을 지닌다.
    - 권한은 총 3종류의 ENUM 타입으로 구분한다. (USER, SELLER, BUYER)
    
---
📌 상품 등록 / 관리
  - 상품 상태
    - 상품 상태는 사용자 권한 중 SELLER와 BUYER에 따라 3종류의 ENUM 타입으로 구분한다.
    - SELLER와 BUYER 모두 동일하게 (PROGRESS, CANCELED, COMPLETED)로 구분한다.
  - 판매자 상품 등록
    - 판매자는 상품명, 상품설명, 최소시작가, 즉시구매가, 경매시작시간, 경매종료시간을 설정한 후 최종 경매를 등록한다.
  - 판매 상품 리스트 조회
    - 판매가 진행 중인 전체 상품 리스트를 조회할 수 있다.
    - 판매가 종료된 전체 상품 리스트를 조회할 수 있다.
    - 자신의 판매 중, 판매 완료 상품 리스트를 조회할 수 있다.
    - 판매 취소한 상품은 리스트 조회 대상에 제외된다.
    - Paging 처리를 한다.
  - 구매 상품 리스트 조회
    - 구매가 진행 중인 전체 상품 리스트를 조회할 수 있다.
    - 구매가 종료된 전체 상품 리스트를 조회할 수 있다.
    - 자신의 구매 중, 구매 완료 상품 리스트를 조회할 수 있다.
    - 구매 취소한 상품은 리스트 조회 대상에 제외된다. 다만, 다른 유저가 구매 중인 상품이라면 전체 상품 리스트에서 조회 가능하다.
  - 상품 상세보기
    - 경매 진행 중인 상품의 상품명, 상품설명, 즉시구매가, 경매종료시간과 최고입찰가를 확인할 수 있다.
---
📌 입찰
  - 판매자는 입찰에 참여할 수 없다.
  - 구매자는 상품의 최소시작가보다 높은 가격, 현재 진행 중인 입찰가보다 높은 가격의 금액만 입찰할 수 있다.
  - 다수의 구매자가 동시에 입찰하게 되면 중복 입찰자가 생길 수 있기 때문에 트랜잭션 관리 및 동시성 이슈를 필수적으로 고려해야 한다.
  - 입찰 성공/진행중/실패 에 대한 여부를 판단하기 위한 3종류의 ENUM 타입으로 구분한다. (SUCCESS, PROGRESS, FAILED)
    
---
📌 실시간 알림
  - 이벤트는 총 2가지로 분류할 수 있다. 자신이 입찰한 상품에 다른 구매자가 추가적인 입찰을 하였을 때 / 자신이 입찰한 상품의 경매가 종료되었을 때
    - 전자의 경우 입찰을 시도한 모든 구매자에게 현재 최고입찰가를 알림 전송.
    - 후자의 경우 최종 입찰자와 등록한 판매자에게 완료 알림 전송.

---
📌 거래
  - 사용자는 가상의 포인트를 구매하여 해당 포인트로 경매에 참가할 수 있다.
  - 포인트의 변동을 추적할 수 있는 전용 테이블을 추가해야 한다.
  - 입찰에 실패할 시 입찰에 사용했던 포인트를 다시 복구한다. 입찰에 성공할 시 입찰 성공자의 사용한 포인트는 소멸되고 판매자에게 해당 포인트만큼 포인트를 증가한다.
  - 경매종료시간이 되었을 시, 추가적인 입찰은 불가능하다. 가장 높은 가격을 제시한 입찰자에게 낙찰 처리한다.
  - 경매시작/종료시간 설정은 최소 1H ~ 24H로 설정 가능하다.
  - 즉시구매가는 판매자가 설정한 즉시구매가만큼 포인트 입력 시 바로 낙찰 처리한다.
 
---

## ERD
<img width="2310" height="1113" alt="image" src="https://github.com/user-attachments/assets/ee22ab3f-9a14-4294-b40a-8e38664faee9" />



## Trouble Shooting


